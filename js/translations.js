// ============================================
// CellShop - Multi-language Translation System
// PT-BR, EN-US, ES
// ============================================

const translations = {
    pt: {
        // Navigation
        nav_home: "InÃ­cio",
        nav_products: "Produtos",
        nav_wholesale: "Atacado",
        
        // Hero
        hero_title: "EletrÃ´nicos Premium",
        hero_subtitle: "Os melhores produtos com entrega internacional",
        hero_btn: "Explorar Produtos",
        hero_promo1: "AtÃ© 30% OFF",
        hero_promo1_sub: "Em acessÃ³rios para iPhone",
        hero_promo2: "Audio Premium",
        hero_promo2_sub: "JBL Wave Beam 2 - ExperiÃªncia sonora incomparÃ¡vel",
        
        // Features
        feature1_title: "Entrega Estadual",
        feature1_desc: "Enviamos para todo o MaranhÃ£o",
        feature2_title: "Compra Segura",
        feature2_desc: "Pagamento 100% protegido",
        feature3_title: "Suporte 24/7",
        feature3_desc: "Atendimento sempre disponÃ­vel",
        feature4_title: "Produtos Originais",
        feature4_desc: "Garantia de autenticidade",
        
        // Products
        products_title: "Nossos Produtos",
        products_subtitle: "EletrÃ´nicos premium com os melhores preÃ§os",
        filter_all: "Todos",
        filter_iphone: "iPhone",
        filter_audio: "Ãudio",
        filter_power: "Carregadores",
        filter_storage: "Armazenamento",
        filter_security: "SeguranÃ§a",
        filter_crypto: "Crypto",
        add_to_cart: "Adicionar",
        
        // Register
        register_title: "Cadastre-se e receba ofertas exclusivas!",
        register_desc: "Fique por dentro das melhores promoÃ§Ãµes",
        register_btn: "Cadastrar-se Agora",
        register_modal_title: "Cadastro",
        form_name: "Nome Completo",
        form_email: "E-mail",
        form_password: "Senha",
        form_country: "PaÃ­s",
        form_city: "Cidade",
        form_doc: "CPF ou CNPJ",
        form_doc_hint: "CNPJ libera acesso ao atacado",
        register_submit: "Cadastrar",
        
        // Wholesale
        wholesale_title: "Ãrea de Atacado",
        wholesale_subtitle: "Compras a partir de 10 unidades com desconto especial de 15% a 20%",
        wholesale_ben1: "Desconto de 15% a 20%",
        wholesale_ben2: "MÃ­nimo 10 unidades",
        wholesale_ben3: "MÃ¡ximo 100 unidades por pedido",
        wholesale_ben4: "Exclusivo para CNPJ",
        wholesale_btn: "Acessar Ãrea de Atacado",
        wholesale_modal_title: "Ãrea de Atacado",
        wholesale_info: "Esta Ã¡rea Ã© exclusiva para clientes com CNPJ cadastrado. Por favor, faÃ§a login ou cadastre-se.",
        wholesale_register: "Cadastrar CNPJ",
        wholesale_cancel: "Cancelar",
        
        // Cart
        cart_title: "Meu Carrinho",
        cart_empty: "Seu carrinho estÃ¡ vazio",
        cart_subtotal: "Subtotal:",
        cart_shipping: "Frete:",
        cart_calculated: "Calculado no checkout",
        cart_total: "Total:",
        cart_continue: "Continuar Comprando",
        cart_checkout: "Finalizar Pedido",
        
        // Chat
        chat_online: "Online",
        chat_welcome: "OlÃ¡! Como estÃ¡ seu dia? Para iniciar, digite seu nome completo.",
        chat_placeholder: "Digite sua mensagem...",
        chat_refund: "Reembolso",
        chat_products: "Produtos",
        chat_agent: "Falar com Agente",
        
        // Footer
        footer_desc: "Sua loja de eletrÃ´nicos premium com entrega internacional.",
        footer_shop: "Comprar",
        footer_products: "Produtos",
        footer_wholesale: "Atacado",
        footer_promo: "PromoÃ§Ãµes",
        footer_help: "Ajuda",
        footer_delivery: "Prazo de Entrega",
        footer_returns: "Trocas e DevoluÃ§Ãµes",
        footer_warranty: "Garantia",
        footer_tracking: "Rastrear Pedido",
        footer_legal: "Legal",
        footer_privacy: "PolÃ­tica de Privacidade",
        footer_terms: "Termos de Uso",
        footer_security: "PolÃ­tica de SeguranÃ§a",
        footer_contact: "Contato",
        footer_hours: "24/7 Suporte",
        footer_rights: "Todos os direitos reservados.",
        
        // Checkout
        checkout_title: "Finalizar Compra",
        checkout_shipping: "EndereÃ§o de Entrega",
        checkout_payment: "Pagamento",
        checkout_review: "Revisar Pedido",
        shipping_country: "PaÃ­s",
        shipping_state: "Estado/ProvÃ­ncia",
        shipping_city: "Cidade",
        shipping_address: "EndereÃ§o",
        shipping_zip: "CEP/CÃ³digo Postal",
        shipping_calculate: "Calcular Frete",
        insurance_title: "Seguro de Mercadoria",
        insurance_desc: "Proteja sua compra contra perda ou avaria (+15%)",
        insurance_yes: "Sim, adicionar seguro",
        insurance_no: "NÃ£o, obrigado",
        payment_card: "CartÃ£o de CrÃ©dito/DÃ©bito",
        payment_pix: "PIX",
        payment_installments: "Parcelamento",
        place_order: "Finalizar Pedido",
        processing: "Processando...",
        
        // Admin
        admin_login: "Login Administrativo",
        admin_username: "UsuÃ¡rio",
        admin_password: "Senha",
        admin_forgot: "Esqueci minha senha",
        admin_signin: "Entrar",
        admin_dashboard: "Dashboard",
        admin_sales: "Vendas",
        admin_products: "Produtos",
        admin_customers: "Clientes",
        admin_orders: "Pedidos",
        admin_settings: "ConfiguraÃ§Ãµes",
        admin_logout: "Sair",
        
        // Product modal
        product_colors: "Cores DisponÃ­veis",
        product_devices: "CompatÃ­vel com",
        product_price: "PreÃ§o",
        product_description: "DescriÃ§Ã£o do Produto",
        customer_reviews: "âœ¨ AvaliaÃ§Ãµes dos Clientes",
        add_cart: "Adicionar ao Carrinho",
        close: "Fechar",
        free_shipping: "âœ“ Frete grÃ¡tis em compras acima de R$ 100",
        selected: "Selecionado",
        device: "Dispositivo",
        
        // Category names
        category_iphone: "iPhone & AcessÃ³rios",
        category_audio: "Ãudio",
        category_power: "Carregadores",
        category_storage: "Armazenamento",
        category_security: "SeguranÃ§a",
        category_crypto: "Cripto",
        category_lifestyle: "Lifestyle"
    },
    
    en: {
        // Navigation
        nav_home: "Home",
        nav_products: "Products",
        nav_wholesale: "Wholesale",
        
        // Hero
        hero_title: "Premium Electronics",
        hero_subtitle: "The best products with international delivery",
        hero_btn: "Explore Products",
        hero_promo1: "Up to 30% OFF",
        hero_promo1_sub: "On iPhone accessories",
        hero_promo2: "Premium Audio",
        hero_promo2_sub: "JBL Wave Beam 2 - Unparalleled sound experience",
        
        // Features
        feature1_title: "International Delivery",
        feature1_desc: "We ship worldwide",
        feature2_title: "Secure Shopping",
        feature2_desc: "100% protected payment",
        feature3_title: "24/7 Support",
        feature3_desc: "Always available service",
        feature4_title: "Original Products",
        feature4_desc: "Authenticity guarantee",
        
        // Products
        products_title: "Our Products",
        products_subtitle: "Premium electronics at the best prices",
        filter_all: "All",
        filter_iphone: "iPhone",
        filter_audio: "Audio",
        filter_power: "Chargers",
        filter_storage: "Storage",
        filter_security: "Security",
        filter_crypto: "Crypto",
        add_to_cart: "Add",
        
        // Register
        register_title: "Sign up and receive exclusive offers!",
        register_desc: "Stay updated with the best promotions",
        register_btn: "Sign Up Now",
        register_modal_title: "Register",
        form_name: "Full Name",
        form_email: "Email",
        form_password: "Password",
        form_country: "Country",
        form_city: "City",
        form_doc: "Tax ID",
        form_doc_hint: "Business ID enables wholesale access",
        register_submit: "Register",
        
        // Wholesale
        wholesale_title: "Wholesale Area",
        wholesale_subtitle: "Orders from 10 units with special discount of 15% to 20%",
        wholesale_ben1: "15% to 20% discount",
        wholesale_ben2: "Minimum 10 units",
        wholesale_ben3: "Maximum 100 units per order",
        wholesale_ben4: "Exclusive for businesses",
        wholesale_btn: "Access Wholesale Area",
        wholesale_modal_title: "Wholesale Area",
        wholesale_info: "This area is exclusive for registered business customers. Please login or register.",
        wholesale_register: "Register Business",
        wholesale_cancel: "Cancel",
        
        // Cart
        cart_title: "My Cart",
        cart_empty: "Your cart is empty",
        cart_subtotal: "Subtotal:",
        cart_shipping: "Shipping:",
        cart_calculated: "Calculated at checkout",
        cart_total: "Total:",
        cart_continue: "Continue Shopping",
        cart_checkout: "Checkout",
        
        // Chat
        chat_online: "Online",
        chat_welcome: "Hello! How's your day? To start, please type your full name.",
        chat_placeholder: "Type your message...",
        chat_refund: "Refund",
        chat_products: "Products",
        chat_agent: "Talk to Agent",
        
        // Footer
        footer_desc: "Your premium electronics store with international delivery.",
        footer_shop: "Shop",
        footer_products: "Products",
        footer_wholesale: "Wholesale",
        footer_promo: "Promotions",
        footer_help: "Help",
        footer_delivery: "Delivery Time",
        footer_returns: "Returns & Exchanges",
        footer_warranty: "Warranty",
        footer_tracking: "Track Order",
        footer_legal: "Legal",
        footer_privacy: "Privacy Policy",
        footer_terms: "Terms of Use",
        footer_security: "Security Policy",
        footer_contact: "Contact",
        footer_hours: "24/7 Support",
        footer_rights: "All rights reserved.",
        
        // Checkout
        checkout_title: "Checkout",
        checkout_shipping: "Shipping Address",
        checkout_payment: "Payment",
        checkout_review: "Review Order",
        shipping_country: "Country",
        shipping_state: "State/Province",
        shipping_city: "City",
        shipping_address: "Address",
        shipping_zip: "ZIP/Postal Code",
        shipping_calculate: "Calculate Shipping",
        insurance_title: "Product Insurance",
        insurance_desc: "Protect your purchase against loss or damage (+15%)",
        insurance_yes: "Yes, add insurance",
        insurance_no: "No, thanks",
        payment_card: "Credit/Debit Card",
        payment_pix: "PIX",
        payment_installments: "Installments",
        place_order: "Place Order",
        processing: "Processing...",
        
        // Admin
        admin_login: "Admin Login",
        admin_username: "Username",
        admin_password: "Password",
        admin_forgot: "Forgot password",
        admin_signin: "Sign In",
        admin_dashboard: "Dashboard",
        admin_sales: "Sales",
        admin_products: "Products",
        admin_customers: "Customers",
        admin_orders: "Orders",
        admin_settings: "Settings",
        admin_logout: "Logout",
        
        // Product modal
        product_colors: "Available Colors",
        product_devices: "Compatible with",
        product_price: "Price",
        product_description: "Product Description",
        customer_reviews: "âœ¨ Customer Reviews",
        add_cart: "Add to Cart",
        close: "Close",
        free_shipping: "âœ“ Free shipping on orders over $100",
        selected: "Selected",
        device: "Device",
        
        // Category names
        category_iphone: "iPhone & Accessories",
        category_audio: "Audio",
        category_power: "Chargers",
        category_storage: "Storage",
        category_security: "Security",
        category_crypto: "Crypto",
        category_lifestyle: "Lifestyle"
    },
    
    es: {
        // Navigation
        nav_home: "Inicio",
        nav_products: "Productos",
        nav_wholesale: "Mayoreo",
        
        // Hero
        hero_title: "ElectrÃ³nicos Premium",
        hero_subtitle: "Los mejores productos con entrega internacional",
        hero_btn: "Explorar Productos",
        hero_promo1: "Hasta 30% OFF",
        hero_promo1_sub: "En accesorios para iPhone",
        hero_promo2: "Audio Premium",
        hero_promo2_sub: "JBL Wave Beam 2 - Experiencia sonora incomparable",
        
        // Features
        feature1_title: "Entrega Internacional",
        feature1_desc: "Enviamos a todo el mundo",
        feature2_title: "Compra Segura",
        feature2_desc: "Pago 100% protegido",
        feature3_title: "Soporte 24/7",
        feature3_desc: "AtenciÃ³n siempre disponible",
        feature4_title: "Productos Originales",
        feature4_desc: "GarantÃ­a de autenticidad",
        
        // Products
        products_title: "Nuestros Productos",
        products_subtitle: "ElectrÃ³nicos premium a los mejores precios",
        filter_all: "Todos",
        filter_iphone: "iPhone",
        filter_audio: "Audio",
        filter_power: "Cargadores",
        filter_storage: "Almacenamiento",
        filter_security: "Seguridad",
        filter_crypto: "Crypto",
        add_to_cart: "Agregar",
        
        // Register
        register_title: "Â¡RegÃ­strate y recibe ofertas exclusivas!",
        register_desc: "Mantente al tanto de las mejores promociones",
        register_btn: "Registrarse Ahora",
        register_modal_title: "Registro",
        form_name: "Nombre Completo",
        form_email: "Correo ElectrÃ³nico",
        form_password: "ContraseÃ±a",
        form_country: "PaÃ­s",
        form_city: "Ciudad",
        form_doc: "RFC/ID Fiscal",
        form_doc_hint: "ID comercial habilita acceso mayorista",
        register_submit: "Registrar",
        
        // Wholesale
        wholesale_title: "Ãrea de Mayoreo",
        wholesale_subtitle: "Compras desde 10 unidades con descuento especial de 15% a 20%",
        wholesale_ben1: "Descuento de 15% a 20%",
        wholesale_ben2: "MÃ­nimo 10 unidades",
        wholesale_ben3: "MÃ¡ximo 100 unidades por pedido",
        wholesale_ben4: "Exclusivo para empresas",
        wholesale_btn: "Acceder a Ãrea de Mayoreo",
        wholesale_modal_title: "Ãrea de Mayoreo",
        wholesale_info: "Esta Ã¡rea es exclusiva para clientes comerciales registrados. Por favor, inicie sesiÃ³n o regÃ­strese.",
        wholesale_register: "Registrar Empresa",
        wholesale_cancel: "Cancelar",
        
        // Cart
        cart_title: "Mi Carrito",
        cart_empty: "Tu carrito estÃ¡ vacÃ­o",
        cart_subtotal: "Subtotal:",
        cart_shipping: "EnvÃ­o:",
        cart_calculated: "Calculado en el checkout",
        cart_total: "Total:",
        cart_continue: "Seguir Comprando",
        cart_checkout: "Finalizar Compra",
        
        // Chat
        chat_online: "En lÃ­nea",
        chat_welcome: "Â¡Hola! Â¿CÃ³mo estÃ¡ tu dÃ­a? Para comenzar, escribe tu nombre completo.",
        chat_placeholder: "Escribe tu mensaje...",
        chat_refund: "Reembolso",
        chat_products: "Productos",
        chat_agent: "Hablar con Agente",
        
        // Footer
        footer_desc: "Tu tienda de electrÃ³nicos premium con entrega internacional.",
        footer_shop: "Comprar",
        footer_products: "Productos",
        footer_wholesale: "Mayoreo",
        footer_promo: "Promociones",
        footer_help: "Ayuda",
        footer_delivery: "Tiempo de Entrega",
        footer_returns: "Devoluciones y Cambios",
        footer_warranty: "GarantÃ­a",
        footer_tracking: "Rastrear Pedido",
        footer_legal: "Legal",
        footer_privacy: "PolÃ­tica de Privacidad",
        footer_terms: "TÃ©rminos de Uso",
        footer_security: "PolÃ­tica de Seguridad",
        footer_contact: "Contacto",
        footer_hours: "Soporte 24/7",
        footer_rights: "Todos los derechos reservados.",
        
        // Checkout
        checkout_title: "Finalizar Compra",
        checkout_shipping: "DirecciÃ³n de EnvÃ­o",
        checkout_payment: "Pago",
        checkout_review: "Revisar Pedido",
        shipping_country: "PaÃ­s",
        shipping_state: "Estado/Provincia",
        shipping_city: "Ciudad",
        shipping_address: "DirecciÃ³n",
        shipping_zip: "CÃ³digo Postal",
        shipping_calculate: "Calcular EnvÃ­o",
        insurance_title: "Seguro de MercancÃ­a",
        insurance_desc: "Protege tu compra contra pÃ©rdida o daÃ±o (+15%)",
        insurance_yes: "SÃ­, agregar seguro",
        insurance_no: "No, gracias",
        payment_card: "Tarjeta de CrÃ©dito/DÃ©bito",
        payment_pix: "PIX",
        payment_installments: "Cuotas",
        place_order: "Realizar Pedido",
        processing: "Procesando...",
        
        // Admin
        admin_login: "Inicio de SesiÃ³n Admin",
        admin_username: "Usuario",
        admin_password: "ContraseÃ±a",
        admin_forgot: "OlvidÃ© mi contraseÃ±a",
        admin_signin: "Iniciar SesiÃ³n",
        admin_dashboard: "Panel de Control",
        admin_sales: "Ventas",
        admin_products: "Productos",
        admin_customers: "Clientes",
        admin_orders: "Pedidos",
        admin_settings: "ConfiguraciÃ³n",
        admin_logout: "Cerrar SesiÃ³n",
        
        // Product modal
        product_colors: "Colores Disponibles",
        product_devices: "Compatible con",
        product_price: "Precio",
        product_description: "DescripciÃ³n del Producto",
        customer_reviews: "âœ¨ Opiniones de Clientes",
        add_cart: "Agregar al Carrito",
        close: "Cerrar",
        free_shipping: "âœ“ EnvÃ­o gratis en compras superiores a $100",
        selected: "Seleccionado",
        device: "Dispositivo",
        
        // Category names
        category_iphone: "iPhone y Accesorios",
        category_audio: "Audio",
        category_power: "Cargadores",
        category_storage: "Almacenamiento",
        category_security: "Seguridad",
        category_crypto: "Cripto",
        category_lifestyle: "Lifestyle"
    }
};

// Get current language
function getCurrentLanguage() {
    return localStorage.getItem('language') || 'pt';
}

// Set language
function setLanguage(lang) {
    localStorage.setItem('language', lang);
    translatePage();
    
    // Update currency based on language
    const currency = lang === 'pt' ? 'BRL' : 'USD';
    setCurrency(currency);
}

// Set currency
function setCurrency(currency) {
    localStorage.setItem('currency', currency);
    
    // Reload products with new currency
    if (typeof loadProducts === 'function') {
        const activeFilter = document.querySelector('.filter-btn.active');
        const category = activeFilter ? activeFilter.dataset.category : 'all';
        loadProducts(category);
    }
    
    // Update cart if open
    if (typeof renderCartItems === 'function') {
        renderCartItems();
    }
}

// Translate page - Complete translation system
function translatePage() {
    const lang = getCurrentLanguage();
    const texts = translations[lang];
    
    // 1. Translate elements with data-translate attribute
    document.querySelectorAll('[data-translate]').forEach(element => {
        const key = element.getAttribute('data-translate');
        if (texts[key]) {
            element.textContent = texts[key];
        }
    });
    
    // 2. Translate placeholders
    document.querySelectorAll('[data-translate-placeholder]').forEach(element => {
        const key = element.getAttribute('data-translate-placeholder');
        if (texts[key]) {
            element.placeholder = texts[key];
        }
    });
    
    // 3. Translate alt text
    document.querySelectorAll('[data-translate-alt]').forEach(element => {
        const key = element.getAttribute('data-translate-alt');
        if (texts[key]) {
            element.alt = texts[key];
        }
    });
    
    // 4. Translate titles
    document.querySelectorAll('[data-translate-title]').forEach(element => {
        const key = element.getAttribute('data-translate-title');
        if (texts[key]) {
            element.title = texts[key];
        }
    });
    
    // 5. Reload products with current language descriptions
    if (typeof loadProducts === 'function') {
        const activeFilter = document.querySelector('.filter-btn.active');
        const category = activeFilter ? activeFilter.dataset.category : 'all';
        loadProducts(category);
    }
    
    // 6. Update cart display
    if (typeof renderCartItems === 'function') {
        renderCartItems();
    }
    
    // 7. Reload any open product modal with new language
    const modal = document.getElementById('productModal');
    if (modal && typeof showProductModal === 'function') {
        const productId = modal.dataset.productId;
        if (productId) {
            modal.remove();
            showProductModal(parseInt(productId));
        }
    }
}

// Initialize language system
document.addEventListener('DOMContentLoaded', () => {
    // Set initial language
    const savedLang = getCurrentLanguage();
    translatePage();
    
    // Update language selector UI
    const flagMap = { pt: 'ðŸ‡§ðŸ‡·', en: 'ðŸ‡ºðŸ‡¸', es: 'ðŸ‡ªðŸ‡¸' };
    const currencyMap = { pt: 'BRL', en: 'USD', es: 'USD' };
    
    const currentFlag = document.getElementById('currentFlag');
    const currentCurrency = document.getElementById('currentCurrency');
    
    if (currentFlag) currentFlag.textContent = flagMap[savedLang];
    if (currentCurrency) currentCurrency.textContent = currencyMap[savedLang];
    
    // Language selector toggle
    const langBtn = document.getElementById('langBtn');
    const langDropdown = document.getElementById('langDropdown');
    
    if (langBtn && langDropdown) {
        langBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            langDropdown.classList.toggle('active');
        });
        
        // Close dropdown when clicking outside
        document.addEventListener('click', () => {
            langDropdown.classList.remove('active');
        });
        
        // Language option click
        document.querySelectorAll('.lang-option').forEach(option => {
            option.addEventListener('click', () => {
                const lang = option.dataset.lang;
                const flag = option.dataset.flag;
                const currency = option.dataset.currency;
                
                setLanguage(lang);
                
                if (currentFlag) currentFlag.textContent = flag;
                if (currentCurrency) currentCurrency.textContent = currency;
                
                langDropdown.classList.remove('active');
            });
        });
    }
});

// Export for use in other files
if (typeof module !== 'undefined' && module.exports) {
    module.exports = { 
        translations, 
        getCurrentLanguage, 
        setLanguage,
        translatePage 
    };
}